<!doctype html>
<html class="theme-next use-motion ">
<head>
  

<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>


<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />








  <link rel="stylesheet" type="text/css" href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5"/>



  <link href='//fonts.googleapis.com/css?family=Lato:300,400,700,400italic&subset=latin,latin-ext' rel='stylesheet' type='text/css'>


<link rel="stylesheet" type="text/css" href="/css/main.css?v=0.4.5.1"/>




  <meta name="keywords" content="Hexo,next" />





  <link rel="shorticon icon" type="image/x-icon" href="/favicon.ico?v=0.4.5.1" />


<meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="wenduo blog">
<meta property="og:url" content="http://yoursite.com/blog/page/3/index.html">
<meta property="og:site_name" content="wenduo blog">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="wenduo blog">
<meta name="twitter:description">


<script type="text/javascript" id="hexo.configuration">
  var CONFIG = {
    scheme: '',
    sidebar: 'post'
  };
</script>

  <title> wenduo blog </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="">

  <!--[if lte IE 8]>
  <div style=' clear: both; height: 59px; padding:0 0 0 15px; position: relative;margin:0 auto;'>
    <a href="http://windows.microsoft.com/en-US/internet-explorer/products/ie/home?ocid=ie6_countdown_bannercode">
      <img src="http://7u2nvr.com1.z0.glb.clouddn.com/picouterie.jpg" border="0" height="42" width="820"
           alt="You are using an outdated browser. For a faster, safer browsing experience, upgrade for free today or use other browser ,like chrome firefox safari."
           style='margin-left:auto;margin-right:auto;display: block;'/>
    </a>
  </div>
<![endif]-->
  



  <div class="container one-column 
   page-home 
">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><h1 class="site-meta">
  <span class="logo-line-before"><i></i></span>
  <a href="/" class="brand" rel="start">
      <span class="logo">
        <i class="icon-next-logo"></i>
      </span>
      <span class="site-title">wenduo blog</span>
  </a>
  <span class="logo-line-after"><i></i></span>
</h1>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu ">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            <i class="menu-item-icon icon-next-home"></i> <br />
            首頁
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            <i class="menu-item-icon icon-next-archives"></i> <br />
            歸檔
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            <i class="menu-item-icon icon-next-tags"></i> <br />
            標籤
          </a>
        </li>
      

      
      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div id="content" class="content"> 
  <section id="posts" class="posts-expand">
    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2015/08/01/c++语法/" itemprop="url">
                c++语法
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          發表於
          <time itemprop="dateCreated" datetime="2015-08-01T15:30:16+08:00" content="2015-08-01">
            2015-08-01
          </time>
        </span>

        

        
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><p>##1.高级宏<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">可变参数</span><br><span class="line"><span class="preprocessor">#<span class="keyword">define</span> Debug(...) printf(__VA_ARGS__);</span></span><br><span class="line">Debug(<span class="string">"%d"</span>,i);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 如参数为空,##可忽略前一个逗号</span></span><br><span class="line"><span class="preprocessor">#<span class="keyword">define</span> Debug(...) printf(<span class="string">"haha"</span>,##__VA_ARGS__);</span></span><br><span class="line">Debug();</span><br></pre></td></tr></table></figure></p>
<h2 id="2-几种cast区别">2.几种cast区别</h2><p>reinterpret_cast 完全复制比特位<br>static_cast: 相当于（）</p>
<blockquote>
<p>Use dynamic_cast for converting pointers/references within an inheritance hierarchy.</p>
<p>Use static_cast for ordinary type conversions.</p>
<p>Use reinterpret_cast for low-level reinterpreting of bit patterns. Use with extreme caution.</p>
<p>Use const_cast for casting away const/volatile. Avoid this unless you are stuck using a const-incorrect API.</p>
</blockquote>
</span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2015/08/01/make指南/" itemprop="url">
                make指南
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          發表於
          <time itemprop="dateCreated" datetime="2015-08-01T15:30:16+08:00" content="2015-08-01">
            2015-08-01
          </time>
        </span>

        

        
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><h2 id="tricks">tricks</h2><p>1.调试<br>可以通过打印变量来调试 @echo “var: “ $(var)</p>
<h2 id="syntax">syntax</h2><ol>
<li><p>target:$@</p>
</li>
<li><p>占位符：%</p>
</li>
<li><p>函数<br>BASE_SRCS += $(wildcard $(SRC_DIR)/*.cpp)<br>MAIN_SRCS = $(patsubst %,./%.cc,$(OBJECT))<br>FUNC_SRCS = $(filter-out $(MAIN_SRCS),$(BASE_SRCS))<br>FUNC_OBJS = $(patsubst %.cc,%.o,$(FUNC_SRCS))</p>
</li>
</ol>
</span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2015/08/01/vim 使用/" itemprop="url">
                vim使用
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          發表於
          <time itemprop="dateCreated" datetime="2015-08-01T15:30:16+08:00" content="2015-08-01">
            2015-08-01
          </time>
        </span>

        

        
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><p>##常用</p>
<ul>
<li>调整格式：选中后 =<br>##跳转<br>##列编辑<br>列插入 ：ctrl+v shift+i<br>##命令模式</li>
<li>% 代表全文 ，比如:%d</li>
<li>全文替换 [addr]s/源字符串/目的字符串/[option]<br>eg: 1. %s/old/new/gc </li>
<li>复制指定行： a,b y</li>
</ul>
</span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2015/08/01/git指南/" itemprop="url">
                git 指南
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          發表於
          <time itemprop="dateCreated" datetime="2015-08-01T15:30:16+08:00" content="2015-08-01">
            2015-08-01
          </time>
        </span>

        

        
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><p>##github相关</p>
<ol>
<li>403 fatal: HTTP request failed解决方法：<br>修改 .git/config 为<a href="https://wenduo@github.com" target="_blank" rel="external">https://wenduo@github.com</a>……..</li>
</ol>
<hr>
<p>##git 拉取</p>
<ol>
<li>拉取某个远程分支到本地，同时本地分支直接push到远端<br>git checkout -b branch origin/branch</li>
</ol>
<hr>
<p>##git 创建</p>
<ol>
<li><p>想直接要git的某一个tag<br>git checkout tags/riak-1.4.2 -b tag1.4</p>
</li>
<li><p>在github上面, 想在dev上面连接上github, 要在github配置一下你再dev的id_rsa.pub就可以了. 然后就可以当用户提交了. 这样只要建立一个项目, 就可以随时的提交了</p>
</li>
<li><p>git的config git config —-list 就可以了</p>
</li>
<li><p>git rm –cached filename<br>这个git 把已经提交上去的文件删除掉</p>
</li>
<li><p>git config –global core.excludesfile ~/.gitignore_global<br>然后这样就可以配置全局的gitignore</p>
</li>
<li><p>git stash 就可以把当前的提交放在stash里面, 这个时候你的分支下面所有的东西就存起来, 变成线上的分支情况了. 什么时候 然后想要的时候再git stash pop 出来就可以了</p>
</li>
<li><p>git stash 完以后, git stash branch multiGet, 把stash里面的代码生成出multiGet分支. 然后你在multiGet里面commit 以后, 再checkout回 master 就可以了</p>
</li>
<li><p>git 回退到历史版本.<br>git reset 72066610b8f78e042091d762606c4fdca431c028<br>所以一个回退到历史版本, 然后把线上这个版本放在一个分支的操作流程是 先git reset 到某一个版本, 然后git stash, 然后 git stash branch multiGet(这里建立一个分支) ; git commit (提交到本地分支). 然后 checkout master. 然后直接git push -f origin master 就可以覆盖线上的了.</p>
</li>
<li><p>git checkout local/proxy.ini 就可以将本地的修改给去掉了. 相当于svn revert了</p>
</li>
<li><p>git config –global color.ui auto</p>
</li>
<li><p>git config –global alias.st status</p>
</li>
<li><p>把线上的某一个branch 直接拉下来在本地开发, 以后pull push 就对应线上的这个branch了<br>git checkout -b 2.0 origin/2.0<br>这里就是把线上的 2.0 版本拉下来, 在本地直接建立一个2.0的分支</p>
</li>
<li><p>强调一下 把线上的某一个分支拉下来开发 git checkout -b experimental origin/experimental</p>
</li>
<li><p>git ignore 某一个项目的.gitignore. 修改.git/info/exclude 这个项目下面的这个文件即可</p>
</li>
</ol>
<p>15.git tag -a 1.5.1 d087e24f699badca8dd399b7ee8e5ea7619011c3 -m “1.5.1 tag”<br>checkout 某一个tag 的方法 git checkout -b 1.6.6 tags/1.6.6<br>添加一个以某一个版本为基础的叫1.5.1的tag<br>git push origin –tags<br>将这个tag添加到远程分支<br>删除tag 的方法<br>先在本地 git tag -d tag_name<br>然后 git push origin :refs/tags/tag_name<br>这样就把本地和远程的tag_name 这个tag 都删除掉了</p>
<p>git fetch –tags 更新拉取线上最新的tags</p>
<ol>
<li><p>git 把多次的提交merge 成一个, 在master merge branch的时候<br>git merge –squash develop<br>这样在提交的时候develop上面所有的提交就变成一次提交</p>
</li>
<li><p>git reset HEAD local/proxy.ini 这句话把提交到本地的cached里面的文件重新拉回本地未提交区域</p>
</li>
<li><p>修改最后一次提交的注释信息<br>git commit –amend 然后可以具体写修改的注释</p>
</li>
<li><p>git 删除远程上面的某个分支的办法<br>git push origin :mario 这里就把 remotes/origin/mario 这个分支给删除掉了</p>
</li>
<li><p>当 git pull 的时候加入本地有很多东西没有加上去, 而你又不想要了. 那么就可以清除掉<br>error: The following untracked working tree files would be overwritten</p>
</li>
</ol>
<p>解决方法 git clean -d -fx “”</p>
<ol>
<li><p>git 把本地的多次提交变成一次提交<br>git reset –soft HEAD~3 &amp;&amp;<br>git commit</p>
</li>
<li><p>git 忽略文件的权限<br>git ignore file permission<br>git config core.filemode false</p>
</li>
<li><p>git 将多次提交合并成一次提交, 在已经提交以后的方法<br>git diff master &gt; ~/a; git checkout master; git checkout -b pull_request; git apply ~/a; git commit -a -m “Pull Request”</p>
</li>
<li><p>git 碰到 unmerged 的时候, 不想要处理这些冲突的时候, 直接git reset 这些文件就可以</p>
</li>
<li><p>当遇到冲突并且你已经pull 的时候, 可以用这个 git-reflog 这个命令找出你merge 之前的版本.<br>然后强行的 git reset –hard dd659b7(版本号) 就可以了</p>
</li>
<li><p>git submodule</p>
</li>
</ol>
<p>git submodule add <a href="https://github.com/chaconinc/DbConnector" target="_blank" rel="external">https://github.com/chaconinc/DbConnector</a></p>
<p>git submodule add git@github.com:baotiao/pink.git ./third/pink<br>添加到指定目录</p>
<p><a href="http://git-scm.com/book/en/v2/Git-Tools-Submodules" target="_blank" rel="external">http://git-scm.com/book/en/v2/Git-Tools-Submodules</a></p>
<ol>
<li>git clean -dxf<br>git在进行branch 切换的时候, 需要考虑到原分支下面还有一些未删除的多余信息, 所以要clean 一下</li>
</ol>
<p>分支操作：<br>删除本地分支：<br>  git tag -d 标签名<br>删除远程分支：<br>   git push origin :refs/tags/标签名  </p>
<p>创建本地分支：<br>   git tag 标签名git push origin :refs/tags/标签名<br>推送到远端：<br>    git push origin 标签名  </p>
<p>Git show </p>
<p>##git stash</p>
<ol>
<li>git stash list</li>
<li>git stash applyç</li>
</ol>
</span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2015/08/01/小而美的redis之dynamic string/" itemprop="url">
                小而美的redis之dynamic_string
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          發表於
          <time itemprop="dateCreated" datetime="2015-08-01T15:30:16+08:00" content="2015-08-01">
            2015-08-01
          </time>
        </span>

        

        
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><p><a href="http://redisbook.readthedocs.org/en/latest/internal-datastruct/sds.html" target="_blank" rel="external">redis设计与实现-简单动态字符串</a></p>
<h3 id="1-_背景">1. 背景</h3><p>c中string查询字符串长度代价为O（n），append字符需重新分配内存</p>
<p>redis中存在大量查询长度，append字符操作</p>
<h3 id="2-_目的">2. 目的</h3><p>构造redis内部新的string类型</p>
<p>以O（1）复杂度查询字符串长度</p>
<p>append分配内存进行优化</p>
<h3 id="3-实现方式">3.实现方式</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">char</span> * sds;</span><br><span class="line"><span class="keyword">struct</span> sdshdr&#123;</span><br><span class="line">    <span class="keyword">int</span> len;</span><br><span class="line">    <span class="keyword">int</span> <span class="built_in">free</span>;</span><br><span class="line">    <span class="keyword">char</span> buf[];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">sds <span class="title">sdsnewlen</span><span class="params">(<span class="keyword">const</span> <span class="keyword">void</span> *init,size_t initlen)</span></span>&#123;</span><br><span class="line">    <span class="keyword">struct</span> sdshdr *sh;</span><br><span class="line">    sh = zmalloc(<span class="keyword">sizeof</span>(<span class="keyword">struct</span> sdshdr)+initlen+<span class="number">1</span>);</span><br><span class="line">    sh-&gt;len=initlen;</span><br><span class="line">    sh-&gt;<span class="built_in">free</span>=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span>(initlen &amp;&amp; init)</span><br><span class="line">        <span class="built_in">memcpy</span>(sh-&gt;buf,init,initlen);</span><br><span class="line">    <span class="keyword">return</span>  (<span class="keyword">char</span>*) sh-&gt;buf;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">inline</span> size_t <span class="title">sdavail</span><span class="params">(<span class="keyword">const</span> sds s)</span></span>&#123;</span><br><span class="line">    <span class="keyword">struct</span> sdshdr *sh=(<span class="keyword">void</span> *)(s - (<span class="keyword">sizeof</span>(<span class="keyword">struct</span> sdshdr)))</span><br><span class="line">    <span class="keyword">return</span> sh-&gt;<span class="built_in">free</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*enlarge space（double what we need）</span><br><span class="line"> *note:this does not change the length of sds string</span><br><span class="line"> */</span></span><br><span class="line"><span class="function">sds <span class="title">sdsMakeRoomFor</span><span class="params">(sds s,size_T addlen)</span></span>&#123;</span><br><span class="line">    strucrt sdshdr *sh,*newsh;</span><br><span class="line">    <span class="keyword">size_t</span> <span class="built_in">free</span>=sdavail(s);</span><br><span class="line">    <span class="keyword">size_t</span> len=sdslen(s);</span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">free</span>&gt;=addlen)</span><br><span class="line">        <span class="keyword">return</span> s;</span><br><span class="line">    newlen=len+addlen;</span><br><span class="line">    <span class="keyword">if</span>(newlen&lt;SDS_MAX_PREALLOC)</span><br><span class="line">        newlen *=<span class="number">2</span>;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        newlen=SDS_MAX_PREALLOC;</span><br><span class="line">    newsh=zrealloc(sh,<span class="keyword">sizeof</span>(<span class="keyword">struct</span> sdshdr)+newlen+<span class="number">1</span>);</span><br><span class="line">    newsh-&gt;len=len;</span><br><span class="line">    newsh-&gt;<span class="built_in">free</span>=newlen-len;</span><br><span class="line">    <span class="keyword">return</span> newsh-&gt;buf;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//copy count len bytes of string pointed by pointer t to sds s</span></span><br><span class="line"><span class="function">sds <span class="title">sdscpylen</span><span class="params">(sds s,<span class="keyword">const</span> <span class="keyword">char</span> *t,size_t len)</span></span>&#123;</span><br><span class="line">    <span class="keyword">struct</span> sdshrd *sh=(<span class="keyword">void</span> *) (s-(<span class="keyword">sizeof</span>(<span class="keyword">struct</span> sdshrdr)));</span><br><span class="line">    <span class="keyword">size_t</span> totlen=sh-&gt;<span class="built_in">free</span> + sh-&gt;len;</span><br><span class="line">    <span class="keyword">if</span>(totlen &lt; len)&#123;</span><br><span class="line">        s=sdsMakeRoomFor(s,len-sh-&gt;len);</span><br><span class="line">        sh=(<span class="keyword">void</span> *)(s-(<span class="keyword">sizeof</span>(<span class="keyword">struct</span> sdshdr)));</span><br><span class="line">        totlen=sh-&gt;<span class="built_in">free</span>+sh-&gt;len;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">memcpy</span>(s,t,len);</span><br><span class="line">    sh-&gt;len=len;</span><br><span class="line">    sh-&gt;<span class="built_in">free</span>=totlen=len;</span><br><span class="line">    <span class="keyword">return</span> s;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="4-_感想">4. 感想</h3><ul>
<li>深入了解调查业务需求。设计恰到好处的元数据结构以改善性能/改善代码结构</li>
</ul>
<hr>
</span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2015/08/01/protobuf/" itemprop="url">
                protobuf
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          發表於
          <time itemprop="dateCreated" datetime="2015-08-01T15:30:16+08:00" content="2015-08-01">
            2015-08-01
          </time>
        </span>

        

        
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><h2 id="常见错误：">常见错误：</h2><ol>
<li>解析错误：parsefromstring 传入char*<br>被\0 截断。应该改为parsefromarray,或先转换为string</li>
</ol>
</span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2015/08/01/编译链接问题诊断/" itemprop="url">
                编译链接问题诊断
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          發表於
          <time itemprop="dateCreated" datetime="2015-08-01T15:30:16+08:00" content="2015-08-01">
            2015-08-01
          </time>
        </span>

        

        
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><p>##1. 编译过程<br><strong>a. 构造命令</strong><br>| 功能        | 使用   |<br>| ——–   | —–:  |<br>| 文件预处理     |  gcc -save-temps test.cc -E -P|<br>| att格式汇编        |   gcc -S -masm=att test.c    |<br>|     查看二进制文件    |    objdump -D test.o    |<br>|生成目标文件test.o | gcc -c test.cc |<br>|     创建静态库libtest.a文件    |    ar -crv libtest.a test.o|<br>|     使用静态库库libleveldb.a    |    g++ -Lheaderpath -llibname test.cc    |<br>|     创建动态库.so文件    |    g++ -fPIC -shared -o lib.so test.cc|  </p>
<p><strong>b. 查看命令</strong></p>
<ul>
<li>查看文件类型<br>file filea,fileb</li>
<li>查看elf文件信息<br>readelf  -h file</li>
<li>查看bin依赖的动态库<br>ldd</li>
</ul>
<h2 id="2-_问题场景">2. 问题场景</h2><h3 id="1-undefined_symbol">1.undefined symbol</h3><blockquote>
<p>先nm -d rados.so |grep symbol 确认so中有该符号 ，-U 未定义，-T有定义<br>然后 ldd rados.so 找出依赖路径<br>最后 nm -d 依赖.so |grep symbol</p>
</blockquote>
<h3 id="2-链接向错误的库">2.链接向错误的库</h3><p>链接时指定程序优先加载某路径下动态库<br>LDFLAG= -rpath=(path)</p>
<h3 id="3-临时需要提高glibc或gcc版本">3.临时需要提高glibc或gcc版本</h3><ol>
<li>安装devtools-1.1或2<br>cat /etc/yum.repos.d/devtools-1.1.repo<br>[testing-1.1-devtools-$releasever]<br>name=testing 1.1 devtools for CentOS $releasever<br>baseurl=<a href="http://people.centos.org/tru/devtools-1.1/$releasever/$basearch/RPMS" target="_blank" rel="external">http://people.centos.org/tru/devtools-1.1/$releasever/$basearch/RPMS</a><br>gpgcheck=0</li>
</ol>
<p>2.当前session更改依赖为devtools<br>scl enable devtoolset-1.1 bash</p>
</span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2015/08/01/gdb使用/" itemprop="url">
                gdb使用
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          發表於
          <time itemprop="dateCreated" datetime="2015-08-01T15:30:16+08:00" content="2015-08-01">
            2015-08-01
          </time>
        </span>

        

        
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><p>删除断点 delete 1<br>查看断点 info b<br>查看线程 info thread<br>进入线程 thread i<br>查看各级上下文 up/down/frame<br>指定搜索源文件目录：-d dir<br>打印类型 ptype var<br>高级断点： b xxx. condition xxx</p>
<h2 id="1-_gdb_脚本">1. gdb 脚本</h2><h4 id="a-_运行">a. 运行</h4><ul>
<li>编辑运行gdb目录的 .gdbinit文件</li>
<li>如果显示auto-load加载不上，则编辑~/.gdbinit<br>set auto-load safe-path / </li>
</ul>
<h2 id="2-_gdb_场景">2. gdb 场景</h2><h4 id="a-_调试子进程">a. 调试子进程</h4><ol>
<li>set detach-on-fork off</li>
<li>inferior id</li>
<li>info inferiors</li>
<li>detach inferior ID</li>
</ol>
</span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2015/08/01/bada常用/" itemprop="url">
                bada常用
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          發表於
          <time itemprop="dateCreated" datetime="2015-08-01T15:30:16+08:00" content="2015-08-01">
            2015-08-01
          </time>
        </span>

        

        
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><p>io:format(“~p~n”, [bada_console:getallprimaryleader()]).</p>
<p>length([io:format(“~p ~p ~p ~n”, [Y, X, node(X)]) || {[X | _],Y}&lt;-[ {pg2:get_members(“stream_media_common@”++integer_to_list(X)++”@primary_worker”), “stream_media_common@”++integer_to_list(X)++”@primary_worker”} || X&lt;-lists:seq(0,1023)]]).</p>
<p>bada_sdk_pb_processor:get_partition(&lt;&lt;”vtscan”&gt;&gt;, &lt;&lt;””&gt;&gt;).</p>
</span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2015/08/01/yum-rpm使用/" itemprop="url">
                yumrpm使用
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          發表於
          <time itemprop="dateCreated" datetime="2015-08-01T15:30:16+08:00" content="2015-08-01">
            2015-08-01
          </time>
        </span>

        

        
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><p>##yum使用：</p>
<ol>
<li>设置yum源 /etc/yum.repo.d/….repo</li>
<li>查找文件  yum whatprovides libc.so.6</li>
<li>查找rpm包 yum search sfdsa.rpm</li>
<li>查看yum 安装历史 /var/log/yum</li>
</ol>
<p>##rpm 使用：</p>
<ol>
<li>查看安装了哪些rpm: rpm -qa</li>
<li>查看rpm包里文件的安装路径：rpm -ql</li>
<li>安装本地rpm包：rpm -ivh</li>
<li>查找文件来自哪个rpm包：rpm -qf path-to-bin</li>
</ol>
</span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/2/">&laquo;</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/4/">&raquo;</a>
  </nav>

 </div>

        

        
      </div>

      
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      <section class="site-overview">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" src="/images/default_avatar.jpg" alt="wenduo" itemprop="image"/>
          <p class="site-author-name" itemprop="name">wenduo</p>
        </div>
        <p class="site-description motion-element" itemprop="description"></p>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">32</span>
              <span class="site-state-item-name">文章</span>
            </a>
          </div>

          <div class="site-state-item site-state-categories">
            
              <span class="site-state-item-count">0</span>
              <span class="site-state-item-name">分類</span>
              
          </div>

          <div class="site-state-item site-state-tags">
            <a href="/tags">
              <span class="site-state-item-count">10</span>
              <span class="site-state-item-name">標籤</span>
              </a>
          </div>

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        <div class="links-of-author motion-element">
          
        </div>

      </section>

      

    </div>
  </aside>


    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner"> <div class="copyright" >
  
  &copy; &nbsp; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="icon-next-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">wenduo</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 強力驅動
</div>

<div class="theme-info">
  主題 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT
  </a>
</div>


 </div>
    </footer>

    <div class="back-to-top"></div>
  </div>

  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  
  
    
    

  


  
  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>
  <script type="text/javascript" src="/js/fancy-box.js?v=0.4.5.1"></script>


  <script type="text/javascript" src="/js/helpers.js?v=0.4.5.1"></script>
  

  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

  <script type="text/javascript" src="/js/motion_global.js?v=0.4.5.1" id="motion.global"></script>




  <script type="text/javascript" src="/js/nav-toggle.js?v=0.4.5.1"></script>
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  

  <script type="text/javascript">
    $(document).ready(function () {
      if (CONFIG.sidebar === 'always') {
        displaySidebar();
      }
      if (isMobile()) {
        FastClick.attach(document.body);
      }
    });
  </script>

  

  
  

  
  <script type="text/javascript" src="/js/lazyload.js"></script>
  <script type="text/javascript">
    $(function () {
      $("#posts").find('img').lazyload({
        placeholder: "/images/loading.gif",
        effect: "fadeIn"
      });
    });
  </script>
</body>
</html>
